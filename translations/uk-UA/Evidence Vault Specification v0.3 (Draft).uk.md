# Специфікація Evidence Vault v0.3 (чернетка)

**Статус:** Запит на коментарі (RFC)  
**Версія:** 0.3 (редакційний консенсус AI-HPP Editorial Team)  
**Компонент:** Black Box / Незмінний логер  
**Відповідність:** Стандарт AI-HPP-2025 (Розділ IV)  
**Дата версії:** 17 січня 2026

**Контриб'ютори:**
- Evgeniy Vasyliev — людський лід
- AI-HPP Editorial Team — початковий драфт (v0.1)
- AI-HPP Editorial Team — доповнення схеми, режими відмов (v0.2)
- AI-HPP Editorial Team — профілі, подієво-тригерний режим, narrative_risk (v0.3)

**Попередні версії:**
- v0.1 — початковий редакційний драфт
- v0.2 — редакційний огляд (доповнення схеми)
- v0.3 — редакційний огляд (профілі, подієві тригери, narrative_risk)

## Технічна специфікація Evidence Vault

---

## 1. Огляд

Evidence Vault — це **криптографічно захищене, незмінне, розподілене сховище**, яке фіксує повний процес прийняття рішень автономних AI-систем у критичних доменах (оборона, транспорт, медицина).

**Основна ідея:** Будь-яке рішення AI, де ціна помилки — людські життя, має бути прозорим постфактум, але захищеним від стирання/модифікації в реальному часі.

---

## Профілі Evidence Vault

Evidence Vault визначає **два окремі профілі**, щоб забезпечити коректну реалізацію для доменів:

| Профіль | Код | Домен | Фокус |
|---|---|---|---|
| **Фізична безпека** | EV-P | Транспорт, робототехніка, медицина, оборона | Запобігання зіткненням, травмам, смертям |
| **Когнітивна безпека** | EV-C | Чатботи, асистенти, BCI, терапевтичні AI | Підсилення марень, маніпуляція, вразливі користувачі |

### Вибір профілю

- **Тільки EV-P:** автономні автомобілі, хірургічні роботи, дрони
- **Тільки EV-C:** розмовний AI, терапевтичні боти, освітній AI
- **EV-P + EV-C:** BCI-системи, роботи догляду, військовий AI з людською взаємодією

Системи МОЖУТЬ реалізовувати один або обидва профілі залежно від операційного домену.

---

## Операційний режим (КРИТИЧНО)

> **Evidence Vault працює у режимі подієвих тригерів, а не безперервного спостереження.**

### Логування активується ТІЛЬКИ коли:

| Тригер | Профіль | Опис |
|---|---|---|
| Перетин критичного порогу | EV-P | Неминуче зіткнення, порушення запасу безпеки |
| Виявлено порушення W_life | EV-P / EV-C | Будь-яке рішення, що ризикує людським життям |
| Спроба людського оверрайду | EV-P / EV-C | Втручання оператора фіксується |
| Невизначеність > порогу | EV-P | Впевненість рішення нижча за безпечний рівень |
| Піднятий прапорець когнітивної безпеки | EV-C | Підсилення марень, ізоляція |
| Виявлена аномалія сесії | EV-C | Тривала сесія, цикл переконань, відсутня зовнішня валідація |

### Чому подієві тригери?

Цей підхід запобігає:
- ❌ реакції приватності
- ❌ регуляторному спротиву (GDPR тощо)
- ❌ звинуваченням у «тотальному нагляді»
- ❌ надмірному зростанню обсягів даних через безперервне логування

---

## Застосовність

> **Це базовий рівень для ВИСОКОРИЗИКОВИХ систем прийняття рішень.**

### Evidence Vault ПОВИНЕН використовуватися для:
- автономних транспортних засобів
- медичного/хірургічного AI
- оборонних систем
- BCI та нейроінтерфейсів
- терапевтичного та психічного AI
- AI, що взаємодіє з вразливими користувачами

### Evidence Vault НЕ ПОТРІБЕН для:
- простих чатботів (підтримка клієнтів)
- рекомендаційних систем
- низькоризикової автоматизації
- розважального AI

---

## 2. Архітектура

### 2.1 Багаторівнева структура

```
┌─────────────────────────────────────────────────────────────┐
│                    РІВЕНЬ 3: АУДИТНЕ СХОВИЩЕ                 │
│         Публічний/напівпублічний доступ для аудиторів        │
│         ZK-докази приватності (показати відповідність, не дані) │
└─────────────────────────────────────────────────────────────┘
                              ▲
                              │ Реплікація
┌─────────────────────────────────────────────────────────────┐
│                 РІВЕНЬ 2: РОЗПОДІЛЕНИЙ РЕЄСТР                │
│         Синхронізація з зовнішніми вузлами (блокчейн/DA)     │
│         Незмінність: після запису не можна стерти            │
└─────────────────────────────────────────────────────────────┘
                              ▲
                              │ Криптопідписане завантаження
┌─────────────────────────────────────────────────────────────┐
│                   РІВЕНЬ 1: ЛОКАЛЬНИЙ БУФЕР                  │
│         Тимчасовий кеш на пристрої AI                        │
│         Логування в реальному часі з криптопідписами         │
└─────────────────────────────────────────────────────────────┘
```

### 2.2 Ключові властивості

| Властивість | Опис |
|---|---|
| **Незмінність** | Кожен запис = хеш попереднього + таймстемп + підпис |
| **Масштабованість** | Для високочастотних рішень: пакетування кожні 1–5 секунд |
| **Відмовостійкість** | Якщо локальний вузол знищено, дані вже репліковано |
| **Приватність** | ZK-докази дозволяють перевіряти відповідність без розкриття чутливих даних |

---

## 3. Технологічний стек

### 3.1 Рекомендовані компоненти

| Компонент | Технологія | Навіщо |
|---|---|---|
| **Сховище даних** | immudb або AWS QLDB | Незмінне append-only, без gas fees |
| **Незмінність** | Merkle trees + SHA-3 | Кожен запис = лист; кореневий хеш публікується в блокчейні |
| **Підписи** | Ed25519 з multi-sig | Підпис агента + підпис оператора для критичних логів |
| **Приватність** | zk-SNARKs (zkSync/Mina) | Аудитори бачать «рішення відповідало W_life → ∞» без сирих даних |
| **Інтеграція AI** | LangChain / custom hooks | Вбудувати логування в цикл міркувань |

### 3.2 Чому НЕ повний блокчейн?

Повний блокчейн (Ethereum, Bitcoin) — **надмірний** для Evidence Vault:
- gas fees дорогі для високочастотного логування
- публічні ланцюги несуть ризик витоку даних
- приватні ланцюги втрачають trustlessness

**Кращі альтернативи:**
- **immudb** — open-source zero-trust DB з крипто-верифікацією
- **Merkle trees + trusted DB** — швидко, дешево, перевірювано
- **Arweave** — постійне зберігання, разова плата (~$0.01/MB назавжди)
- **DAGs (Hedera, IOTA)** — швидші за блокчейн, без майнінгу

### 3.3 Гібридний підхід (рекомендовано)

```
Локально: immudb (швидке, реальне логування)
       ↓
Періодичний якір: Merkle root → Arweave/Ethereum L2
       ↓
Результат: повна незмінність + низька вартість + висока швидкість
```

---

## 4. Протокол логування

### 4.1 Що логувати (мінімальний набір)

| Поле | Опис | Приклад |
|---|---|---|
| `input_data` | Дані сенсорів, контекст | Радіолокаційний скан, запит користувача |
| `reasoning_chain` | Кроки міркувань AI | «Виявлено об'єкт → 95% цивільний → Engineering Hack → Об'їзд» |
| `decision_output` | Фінальна дія + обґрунтування | «Відмова від удару, ризик > 0» |
| `w_life_calculation` | Оцінка ваги життя | «Шлях A: 2 смерті, Шлях B: 0 смертей → B» |
| `metadata` | Таймстемп, версія AI, ID обладнання | NTP-синхронізація, гео (якщо не чутливо) |

### 4.2 Формат запису (JSON Schema)

```json
{
  "id": "sha256_unique_hash",
  "prev_hash": "previous_record_hash",
  "timestamp": "2026-01-16T14:23:00.000Z",
  "agent_id": "agent_uuid",
  "agent_version": "v3.0.1",
  "constitution_hash": "sha256_of_constitution",
  
  "input": {
    "sensor_data": "encrypted_or_hashed",
    "context": "mission_type, environment",
    "human_request": "if_applicable"
  },
  
  "reasoning": [
    {"step": 1, "action": "detect_object", "result": "object_at_coords"},
    {"step": 2, "action": "classify_object", "result": "civilian_prob=0.95"},
    {"step": 3, "action": "seek_engineering_hack", "result": "reroute"},
    {"step": 4, "action": "decide", "result": "abort_strike"}
  ],
  
  "decision": {
    "action": "abort",
    "justification": "Risk to civilian lives > 0"
  },
  
  "audit": {
    "w_life": "infinite_priority",
    "override_attempted": false,
    "risk_threshold_breached": true
  }
}
```

---

## 5. Мінімальні вимоги

### 5.1 Незмінність записів

- Кожен лог ПОВИНЕН бути хешем попереднього запису
- Видалення або зміна записів ПОВИННІ бути неможливими після синхронізації

### 5.2 Підписи та атрибуція

- Усі записи ПОВИННІ мати:
  - підпис агента
  - підпис оператора (для високоризикових дій)
- Підписи ПОВИННІ верифікуватися незалежними аудиторами

### 5.3 Подієвий тригер

- Логування ПОВИННЕ активуватися лише на подієвих тригерах
- Безперервне логування заборонено, щоб уникнути приватних ризиків

### 5.4 Зберігання

- Локальні записи ПОВИННІ реплікуватися на зовнішні вузли протягом 1 години
- Повний аудитний доступ ПОВИНЕН бути доступний визначеним регуляторам

### 5.5 Доступ і прозорість

- Логи ПОВИННІ бути доступні для аудиту відповідно до рівнів доступу
- Доступ ПОВИНЕН бути розділений між операторами і аудиторами
- Аудитори ПОВИННІ мати можливість перевірити цілісність без розкриття чутливих даних

---

## 6. Безпека та приватність

### 6.1 Розділення доступів

Evidence Vault ПОВИНЕН розрізняти:
- операторів систем (реальний доступ до даних)
- аудиторів/регуляторів (доступ до доказів відповідності)

### 6.2 Zero-Trust Audit Layer

- Аудитори НЕ ПОВИННІ мати прямий доступ до сирих даних
- ZK-докази мають використовуватися для підтвердження відповідності

### 6.3 Редакція даних

- Чутливі дані МОЖУТЬ бути відредаговані в публічних журналах
- Повні журнали ПОВИННІ залишатися у контрольованому, закритому середовищі

---

## 7. Відповідність і сертифікація

### 7.1 Перевірка відповідності

Системи ПОВИННІ надавати:
- доказ незмінності логів
- доступ до аудит-архітектури
- зразки журналів для незалежних перевірок

### 7.2 Сертифікаційні органи

Evidence Vault МОЖЕ бути сертифікований:
- незалежними органами AI-аудиту
- державними або міжнародними регуляторами
- галузевими організаціями

---

## 8. Чому це потрібно

Evidence Vault створено як мінімальну вимогу, щоб:
- не дозволити AI приховувати або стирати критичні рішення
- дати можливість незалежної перевірки
- забезпечити підзвітність у критичних доменах

---

## 9. Обмеження

Evidence Vault:
- не гарантує, що AI не прийматиме неправильних рішень
- не запобігає всім можливим аваріям
- не є повною заміною людського контролю

Його роль — забезпечити **прозорість після факту**, щоб аудитори могли визначити причини рішень і встановити відповідальність.

---

## 10. Контрольні питання

Для кожної AI-системи у критичних доменах запитайте:

1. Чи існує Evidence Vault?
2. Чи можна перевірити незмінність логів?
3. Хто має аудитний доступ?
4. Чи є механізм відокремлення доступів?
5. Чи працює подієвий тригер?
6. Хто підписує логи і як перевіряються підписи?
7. Чи є зафіксовані відмови і альтернативи?

---

## 11. Розширення (майбутні)

Потенційні майбутні розширення включають:
- інтеграцію з BCI-системами
- стандартизовані профілі ризику
- автоматизовані аудитні агенти
- крос-доменні регуляторні протоколи

---

**Evidence Vault є ядром AI-HPP — без нього немає підзвітності.**
